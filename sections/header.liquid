{%- liquid
  assign logo_width = section.settings.logo_width | default: 200
  assign menu = section.settings.menu
-%}

<header class="header" role="banner">
  <div class="header__wrapper">
    <div class="container">
      <div class="header__inner">
        <!-- Logo -->
        <div class="header__logo">
          <a href="{{ routes.root_url }}" class="header__logo-link" aria-label="{{ shop.name }}">
            {%- if section.settings.logo != blank -%}
              <img
                src="{{ section.settings.logo | image_url: width: logo_width }}"
                srcset="{{ section.settings.logo | image_url: width: logo_width }} 1x, {{ section.settings.logo | image_url: width: logo_width | times: 2 }} 2x"
                alt="{{ section.settings.logo.alt | default: shop.name }}"
                width="{{ logo_width }}"
                height="{{ logo_width | divided_by: section.settings.logo.aspect_ratio | round }}"
                class="header__logo-image"
                loading="eager"
              >
            {%- else -%}
              <span class="header__logo-text">{{ shop.name }}</span>
            {%- endif -%}
          </a>
        </div>

        <!-- Desktop Navigation -->
        <nav class="header__nav" role="navigation" aria-label="Main navigation">
          {%- if menu != blank -%}
            <ul class="header__nav-list">
              {%- for link in menu.links -%}
                <li class="header__nav-item">
                  <a
                    href="{{ link.url }}"
                    class="header__nav-link {% if link.active %}header__nav-link--active{% endif %}"
                    {% if link.current %}aria-current="page"{% endif %}
                  >
                    {{ link.title }}
                  </a>
                </li>
              {%- endfor -%}
            </ul>
          {%- endif -%}
        </nav>

        <!-- Right Side Actions -->
        <div class="header__actions">
          <!-- Cart Icon -->
          <a href="{{ routes.cart_url }}" class="header__cart-link" aria-label="Cart">
            <span class="header__cart-icon" aria-hidden="true">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 4V2C7 1.44772 7.44772 1 8 1H16C16.5523 1 17 1.44772 17 2V4H20C20.5523 4 21 4.44772 21 5C21 5.55228 20.5523 6 20 6H19V19C19 20.1046 18.1046 21 17 21H7C5.89543 21 5 20.1046 5 19V6H4C3.44772 6 3 5.55228 3 5C3 4.44772 3.44772 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z" fill="currentColor"/>
                <path d="M9 9V17H11V9H9Z" fill="currentColor"/>
                <path d="M13 9V17H15V9H13Z" fill="currentColor"/>
              </svg>
            </span>
            <span class="header__cart-count" data-cart-count>
              {%- if cart.item_count > 0 -%}
                {{ cart.item_count }}
              {%- endif -%}
            </span>
          </a>

          <!-- Mobile Menu Toggle -->
          <button
            type="button"
            class="header__mobile-toggle"
            data-mobile-nav-toggle
            aria-label="Toggle mobile menu"
            aria-expanded="false"
            aria-controls="mobile-nav-menu"
          >
            <span class="header__mobile-toggle-icon">
              <span class="header__mobile-toggle-line"></span>
              <span class="header__mobile-toggle-line"></span>
              <span class="header__mobile-toggle-line"></span>
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation Overlay -->
  <div class="header__mobile-overlay" data-mobile-nav-overlay></div>

  <!-- Mobile Navigation Menu -->
  <nav
    class="header__mobile-nav"
    id="mobile-nav-menu"
    data-mobile-nav-menu
    role="navigation"
    aria-label="Mobile navigation"
    aria-hidden="true"
  >
    <div class="header__mobile-nav-inner">
      {%- if menu != blank -%}
        <ul class="header__mobile-nav-list">
          {%- for link in menu.links -%}
            <li class="header__mobile-nav-item">
              <a
                href="{{ link.url }}"
                class="header__mobile-nav-link {% if link.active %}header__mobile-nav-link--active{% endif %}"
                {% if link.current %}aria-current="page"{% endif %}
              >
                {{ link.title }}
              </a>
            </li>
          {%- endfor -%}
        </ul>
      {%- endif -%}
    </div>
  </nav>
</header>

<style>
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(17, 24, 39, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-md);
  }

  .header__wrapper {
    padding: var(--spacing-sm) 0;
  }

  .header__inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
  }

  .header__logo {
    flex-shrink: 0;
  }

  .header__logo-link {
    display: block;
    text-decoration: none;
  }

  .header__logo-text {
    font-family: var(--font-heading);
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-white);
    letter-spacing: -0.02em;
  }

  .header__logo-image {
    display: block;
    height: auto;
  }

  .header__nav {
    display: none;
  }

  @media (min-width: 768px) {
    .header__nav {
      display: block;
      flex: 1;
    }
  }

  .header__nav-list {
    display: flex;
    align-items: center;
    gap: var(--spacing-lg);
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .header__nav-item {
    margin: 0;
  }

  .header__nav-link {
    font-family: var(--font-body);
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--color-white);
    text-decoration: none;
    letter-spacing: -0.01em;
    transition: color var(--transition-fast);
    position: relative;
  }

  .header__nav-link:hover {
    color: var(--color-victory-red);
  }

  .header__nav-link--active {
    color: var(--color-teal-600);
  }

  .header__nav-link--active::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    right: 0;
    height: 2px;
    background-color: var(--color-teal-600);
    border-radius: var(--radius-full);
  }

  .header__actions {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
  }

  .header__cart-link {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-championship-white);
    text-decoration: none;
    transition: color var(--transition-base);
  }

  .header__cart-link:hover {
    color: var(--color-teal-600);
  }

  .header__cart-icon {
    display: block;
    width: 24px;
    height: 24px;
  }

  .header__cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-white);
    background: var(--color-teal-600);
    border-radius: var(--radius-full);
    font-weight: 600;
  }

  .header__mobile-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--color-championship-white);
    transition: color var(--transition-base);
  }

  .header__mobile-toggle:hover {
    color: var(--color-teal-600);
  }

  .header__mobile-toggle:focus-visible {
    outline: 2px solid var(--color-victory-red);
    outline-offset: 2px;
  }

  @media (min-width: 768px) {
    .header__mobile-toggle {
      display: none;
    }
  }

  .header__mobile-toggle-icon {
    display: flex;
    flex-direction: column;
    gap: 5px;
    width: 24px;
  }

  .header__mobile-toggle-line {
    width: 100%;
    height: 2px;
    background-color: currentColor;
    transition: all var(--transition-base);
  }

  .header__mobile-toggle.is-active .header__mobile-toggle-line:nth-child(1) {
    transform: rotate(45deg) translate(7px, 7px);
  }

  .header__mobile-toggle.is-active .header__mobile-toggle-line:nth-child(2) {
    opacity: 0;
  }

  .header__mobile-toggle.is-active .header__mobile-toggle-line:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
  }

  .header__mobile-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(10, 10, 10, 0.8);
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-base), visibility var(--transition-base);
    z-index: 99;
  }

  .header__mobile-overlay.is-active {
    opacity: 1;
    visibility: visible;
  }

  .header__mobile-nav {
    position: fixed;
    top: 0;
    right: 0;
    width: 80%;
    max-width: 400px;
    height: 100vh;
    background-color: var(--color-gridiron-black);
    border-left: 1px solid var(--color-chrome-silver);
    transform: translateX(100%);
    transition: transform var(--transition-base);
    z-index: 100;
    overflow-y: auto;
  }

  .header__mobile-nav.is-open {
    transform: translateX(0);
  }

  .header__mobile-nav-inner {
    padding: var(--spacing-xl) var(--spacing-lg);
  }

  .header__mobile-nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .header__mobile-nav-item {
    margin: 0;
    border-bottom: 1px solid rgba(200, 204, 208, 0.1);
  }

  .header__mobile-nav-link {
    display: block;
    padding: var(--spacing-4) 0;
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 500;
    color: var(--color-white);
    text-decoration: none;
    letter-spacing: -0.01em;
    transition: color var(--transition-fast);
  }

  .header__mobile-nav-link:hover {
    color: var(--color-teal-600);
  }

  .header__mobile-nav-link--active {
    color: var(--color-teal-600);
  }
</style>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image",
      "info": "If no logo is uploaded, the shop name will be displayed as text"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 200,
      "unit": "px",
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}

